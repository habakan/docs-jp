# ステーキングとペイアウト

## モチベーション

[シビル攻撃](https://en.wikipedia.org/wiki/Sybil_attack)などのNumeraiにとって不都合な攻撃を防止しつつNMRをペイアウトするにはどのようなシステムを設計すればよいでしょうか？<br>

その答えはステーキング(=預け入れ)です。各参加者はNMRを掛け金として自分の予測の正確さを担保します。NMRのステーク量が多ければ多いほど予測に自信をもっているとみなします。<br>

Numeraiは正確な予測ファイルの提出を望んでおり、良い予測には高い報酬で報います。<br>

どれだけのNMRを得られるかはNMRのステーク量と、Corr,MMCの値に依存します。<br>
これは、[Skin in the Game](https://www.amazon.com/dp/B075HYVP7C/)という本で述べられているメゾットを使用しています。<br>

NumeraiにNMRをステーキングする場合、Numeraiはシビル耐性のある方法を提供します。NMRのペイアウトはステーク量に比例するため、複数のアカウントを作成するだけでは多くのペイアウト得ることができません。<br>

もちろん、NMRをステークせずにNumeraiに参加することもできます。<br>
例えば、トーナメントの詳細や自分のモデルの性能を知るために、NMRをステークしないのは良いテストとなるでしょう。<br>
自分のモデルに自信が持てるようになったら、そのモデルにステークすることができます。ステークの最小値は3NMRです。<br>

## ステーク量の変更方法

Numeraiのウェブサイトでは、「Manage Stake」をクリックしてステーク量を管理できます。このモーダルを使用すれば、NMRのステーク量を増減したり、`Corr`、`Corr+1/2MMC`、`Corr+MMC`、`Corr+2MMC`にベットできます。
ステーキングとは、NMRをイーサリアムブロックチェーンのスマートコントラクトに固定することを意味します。ステーク中はNumeraiがロックアップされたNMRを増減させる権利を保有します。

![](../.gitbook/assets/image%20%2818%29.png)

NMRのステーク量を増やすと、あなたのウォレットからNMRが引き出され、Numeraiの保有しているアカウントにNMRが移送されます。<br>
NMRのステーク量を減らすと、Numeraiの保有しているアカウントからNMRが移送され、あなたのウォレットに入金されます。

ステーク量への変更はすぐに適用されるのではなく、約4週間後に反映されます。これは、トーナメントの終了期間が4週間であることに起因します。

## ペイアウト
どれだけのNMRを得られるかはNMRのステーク量と、Corr,MMCの値に依存します。<br>
スコアが高いほど、より多くのNMRを得ることができます。もし負のCorr,MMCとなった場合、ステークしたNMRの一部が没収され、バーンされます。<br>
バーンとはERC-20トークンの持つ機能の一つであり、トークンを永遠に使用できなくする操作のことです。<br>
ペイアウトされるNMRの量はステークした量の±25％に制限されています。<br>
ペイアウトは以下の式で計算されます。<br>
payout = stake_value * payout_factor * (corr * corr_multiplier + mmc * mmc_multiplier)<br>
stake_value:ラウンド開始時点の最初の木曜日にステークしたNMRの量<br>
payout_factor:30万NMR以下では1、30万NMR以上では以下の図に示す値をとります。Numeraiはペイアウトの上限を決めることで持続的なトーナメントの開催を行うことができます。<br>
![](../.gitbook/assets/factor.png)
corr:提出した予測ファイルとターゲットの相関<br>
corr_multiplier:現在は1のみ<br>
mmc:提出した予測ファイルとメタモデルの相関<br>
mmc_multiplier:0,0.5,1,2の中で一つ選べる。<br>

ペイアウトファクターの関数やマルチプライヤーは、Numeraiによって変更される可能性があります。<br>

ペイアウト計算の例を次に示します。最初の2つの例は、スコア乗数の調整の影響を示しています。3番目の例は、負のスコアがどのように火傷を引き起こす可能性があるかを示しています。4番目の例は、ペイアウトがステーク値の±25％に制限されていることを示しています。
![](../.gitbook/assets/Payout.png)
毎日のスコアごとに、支払いの新しい毎日の更新も計算されます。これらの毎日の支払いも更新であり、ラウンドの最終的な支払いのみがカウントされます。コミュニティで構築されたNumeraiPayoutsアプリを使用して、毎日の支払いを追跡できます。 最終的な支払いは、ラウンドの終了時（水曜日）にステークに支払われます。ステークを開始すると、最初の4ラウンドの間ステーク値は一定に保たれます。その後、4週間前のラウンドの支払いに基づいて、ステーク値が毎週更新されます。
![](../.gitbook/assets/payout_week.png)

![](../.gitbook/assets/payout_predict.png)
## 濫用防止

当社は、お客様が積極的にペイアウトルールを悪用している、または悪用していると当社が判断した場合には、お客様の賭け金を払い戻し、すべての得られたNMRを無効化にする権利を保有します。

Numearaiの支払いシステムは攻撃に強いように設計されております。ユーザーが罰を恐れずに新しいアイデアを試してもらいたいため、この権利を行使することはめったにありません。

悪質な攻撃を発見した場合には、そのことをコミュニティに伝えてください。以前あった攻撃の一つが[こちら](https://forum.numer.ai/t/leaderboard-bonus-exploit-uncovered/200/8)で紹介されています。

